var e=Object.defineProperty,t=(t,n,s)=>((t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s)(t,"symbol"!=typeof n?n+"":n,s);import{r as n,g as s}from"./phaser-DJkhv3Fe.js";function o(e){console.error(`[ERROR] ${e.message}`),e.filename&&console.error(`File: ${e.filename} at ${e.lineNumber}:${e.columnNumber}`),e.stack&&console.error(`Stack: ${e.stack}`)}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const a=s(n());class r extends a.Scene{constructor(e){super(e)}get cameraCenter(){return{x:this.cameras.main.centerX,y:this.cameras.main.centerY}}get cameraDimensions(){return{width:this.cameras.main.width,height:this.cameras.main.height}}}class i extends Phaser.GameObjects.Container{constructor(e){super(e,0,0),t(this,"loadingPercentText"),t(this,"loadingBar"),t(this,"MAX_WIDTH",220);const n={x:e.cameras.main.centerX,y:e.cameras.main.centerY},s={x:n.x,y:1.05*n.y},o=e.add.rectangle(s.x,s.y,226,16,3355443);this.loadingBar=e.add.rectangle(s.x,s.y,0,14,16777215),this.loadingPercentText=e.add.text(s.x,s.y,"0%",{fontSize:"11px",color:"#000000"}).setOrigin(.5),this.add([o,this.loadingBar,this.loadingPercentText]),e.add.existing(this)}updateProgress(e){if(e<0||e>1)throw new Error("Invalid argument");const t=100*e;this.loadingPercentText.setText(`${t.toFixed(0)}%`),this.loadingBar.setSize(this.MAX_WIDTH*e,this.loadingBar.height)}}function c(e){const{scene:t,target:n,duration:s,onComplete:o}=e;t.tweens.add({targets:n,alpha:0,duration:s,onComplete:o})}function d(e){const{scene:t,target:n,duration:s,onComplete:o}=e;t.tweens.add({targets:n,alpha:1,duration:s,onComplete:o})}function l(e){const{scene:t,nextSceneKey:n,cameraAnimationDuration1:s=500,cameraAnimationDuration2:o=500}=e;if(!(t instanceof Phaser.Scene))throw new Error("Invalid argument: scene isn't an instance of Phaser.Scene");c({scene:t,target:t.cameras.main,duration:s,onComplete:()=>{t.scene.start(n);const e=t.scene.get(n);e.events.once(Phaser.Scenes.Events.CREATE,(()=>{e.cameras.main.alpha=0,d({scene:e,target:e.cameras.main,duration:o,onComplete:()=>{}})}))}})}function h(e){const{scene:t,target:n,duration:s,onComplete:o}=e;d({scene:t,target:n,duration:s,onComplete:()=>{c({scene:t,target:n,duration:s,onComplete:o})}})}window.addEventListener("error",(function(e){const{message:t,filename:n,lineno:s,colno:a,error:r}=e;o({message:t,filename:n,lineNumber:s,columnNumber:a,stack:null==r?void 0:r.stack})})),window.addEventListener("unhandledrejection",(function(e){const t=e.reason;o({message:(null==t?void 0:t.message)||"Unhandled Promise Rejection",stack:(null==t?void 0:t.stack)||String(t)})}));const m={title:"A ruína de Arquimedes",type:a.WEBGL,pixelArt:!0,scale:{mode:a.Scale.FIT,autoCenter:a.Scale.CENTER_BOTH,width:427,height:240},parent:"game-container",render:{antialias:!1,antialiasGL:!1,pixelArt:!0},roundPixels:!0,physics:{default:"arcade",arcade:{debug:!1,fps:24,timeScale:1,gravity:{x:0,y:0},tileBias:16}},scene:[class extends r{constructor(){super("Boot")}preload(){this.load.on("complete",(()=>this.addEventsToGoToNextScene()))}create(){const e=this.cameraCenter;!function(e){const{scene:t,target:n,othersConfigs:s}=e;t.tweens.add({targets:n,alpha:s.alpha||0,duration:s.duration||1e3,yoyo:s.yoyo||!0,repeat:s.repeat||-1})}({scene:this,target:this.add.text(e.x,e.y,"Press any key or click to start the game",{fontSize:12}).setOrigin(.5),othersConfigs:{duration:1e3}})}addEventsToGoToNextScene(){var e;null==(e=this.input.keyboard)||e.on("keydown",(()=>{this.scene.start("Preloader"),this.removeEventsToGoToNextScene()})),this.input.on("pointerdown",(()=>{this.scene.start("Preloader"),this.removeEventsToGoToNextScene()}))}removeEventsToGoToNextScene(){var e;null==(e=this.input.keyboard)||e.off("keydown"),this.input.off("pointerdown")}},class extends r{constructor(){super("Preloader"),t(this,"loadingBar"),t(this,"currentAssetInLoadingText")}init(){this.loadingBar=new i(this);const e=this.cameraCenter,t={x:e.x,y:.9*e.y};this.add.text(t.x,t.y,"Loading").setOrigin(.5);const n={x:e.x,y:1.18*e.y};this.currentAssetInLoadingText=this.add.text(n.x,n.y,"Asset: ",{color:"#c1c1c1",fontSize:10}).setOrigin(.5)}preload(){this.load.setPath("assets"),this.load.image("logo","logos/logo_en.png"),this.load.image("logo-phaser","logos/logo_phaser.png"),this.load.image("background","backgrounds/background_test.png"),this.load.on("progress",this.loadingBar.updateProgress.bind(this.loadingBar)),this.load.on("fileprogress",this.updateFilesInLoadingText.bind(this)),this.load.on("complete",this.completeLoading.bind(this))}updateFilesInLoadingText(e){this.currentAssetInLoadingText.setText(`Asset: ${e.key}`)}completeLoading(){l({scene:this,nextSceneKey:"Intro",cameraAnimationDuration1:1e3,cameraAnimationDuration2:1e3})}},class extends r{constructor(){super("Intro"),t(this,"DEFAULT_DELAY",1500),t(this,"TEXT_STYLE",{fontSize:14,color:"#fff",align:"center"})}create(){const e=this.cameraDimensions;this.add.image(e.width/2,e.height/2,"background").setDisplaySize(e.width,e.height).setAlpha(.07,0,0,.07);const t=this.cameraCenter,n=.7*t.y;this.showPhaserIntro(t,n)}showPhaserIntro(e,t){h({scene:this,target:this.createIntroElements(e,t,"logo-phaser",.03,"Powered by Phaser"),duration:this.DEFAULT_DELAY,onComplete:()=>{this.showGameIntro(e,t)}})}showGameIntro(e,t){h({scene:this,target:this.createIntroElements(e,t,"logo",.25,"A Ruína de Arquimedes"),duration:this.DEFAULT_DELAY,onComplete:()=>{this.transitionToMainMenu()}})}createIntroElements(e,t,n,s,o){const a=this.add.image(e.x,t,n).setScale(s).setAlpha(0),r=1.4*e.y;return[a,this.add.text(e.x,r,o,this.TEXT_STYLE).setOrigin(.5).setAlpha(0)]}transitionToMainMenu(){l({scene:this,nextSceneKey:"MainMenu",cameraAnimationDuration1:this.DEFAULT_DELAY,cameraAnimationDuration2:this.DEFAULT_DELAY})}},class extends r{constructor(){super("MainMenu")}create(){const e=this.cameraCenter,t={x:e.x,y:.5*e.y};this.add.image(t.x,t.y,"logo").setDisplaySize(200,100);const n={x:e.x,y:1.3*e.y};this.add.text(n.x,n.y,"IN PROGRESS.").setOrigin(.5)}},class extends r{constructor(){super("Game")}create(){}},class extends r{constructor(){super("GameOver")}create(){}}]};new a.Game(m);
